!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["use-query-sync-data"]=e(t.Vue)}(this,(function(t){"use strict";const e="object"==typeof global&&global&&global.Object===Object&&global;var r="object"==typeof self&&self&&self.Object===Object&&self;const n=e||r||Function("return this")();const o=n.Symbol;var c=Object.prototype,a=c.hasOwnProperty,u=c.toString,i=o?o.toStringTag:void 0;var s=Object.prototype.toString;var f="[object Null]",l="[object Undefined]",p=o?o.toStringTag:void 0;function b(t){return null==t?void 0===t?l:f:p&&p in Object(t)?function(t){var e=a.call(t,i),r=t[i];try{t[i]=void 0;var n=!0}catch(c){}var o=u.call(t);return n&&(e?t[i]=r:delete t[i]),o}(t):function(t){return s.call(t)}(t)}function y(t){return null!=t&&"object"==typeof t}const v=Array.isArray;function j(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var h="[object AsyncFunction]",d="[object Function]",_="[object GeneratorFunction]",g="[object Proxy]";function O(t){if(!j(t))return!1;var e=b(t);return e==d||e==_||e==h||e==g}const m=n["__core-js_shared__"];var w,A=(w=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+w:"";var x=Function.prototype.toString;function S(t){if(null!=t){try{return x.call(t)}catch(e){}try{return t+""}catch(e){}}return""}var z=/^\[object .+?Constructor\]$/,P=Function.prototype,F=Object.prototype,U=P.toString,k=F.hasOwnProperty,I=RegExp("^"+U.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C(t){return!(!j(t)||(e=t,A&&A in e))&&(O(t)?I:z).test(S(t));var e}function E(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return C(r)?r:void 0}const M=E(n,"WeakMap");var T=Object.create;const q=function(){function t(){}return function(e){if(!j(e))return{};if(T)return T(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const B=function(){try{var t=E(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();var D=9007199254740991,$=/^(?:0|[1-9]\d*)$/;function R(t,e){var r=typeof t;return!!(e=null==e?D:e)&&("number"==r||"symbol"!=r&&$.test(t))&&t>-1&&t%1==0&&t<e}function N(t,e,r){"__proto__"==e&&B?B(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function V(t,e){return t===e||t!=t&&e!=e}var W=Object.prototype.hasOwnProperty;function L(t,e,r){var n=t[e];W.call(t,e)&&V(n,r)&&(void 0!==r||e in t)||N(t,e,r)}function G(t,e,r,n){var o=!r;r||(r={});for(var c=-1,a=e.length;++c<a;){var u=e[c],i=n?n(r[u],t[u],u,r,t):void 0;void 0===i&&(i=t[u]),o?N(r,u,i):L(r,u,i)}return r}var J=9007199254740991;function Q(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=J}function H(t){return null!=t&&Q(t.length)&&!O(t)}var K=Object.prototype;function X(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||K)}function Y(t){return y(t)&&"[object Arguments]"==b(t)}var Z=Object.prototype,tt=Z.hasOwnProperty,et=Z.propertyIsEnumerable,rt=Y(function(){return arguments}())?Y:function(t){return y(t)&&tt.call(t,"callee")&&!et.call(t,"callee")};const nt=rt;var ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,ct=ot&&"object"==typeof module&&module&&!module.nodeType&&module,at=ct&&ct.exports===ot?n.Buffer:void 0;const ut=(at?at.isBuffer:void 0)||function(){return!1};var it={};function st(t){return function(e){return t(e)}}it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object Boolean]"]=it["[object DataView]"]=it["[object Date]"]=it["[object Error]"]=it["[object Function]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object WeakMap]"]=!1;var ft="object"==typeof exports&&exports&&!exports.nodeType&&exports,lt=ft&&"object"==typeof module&&module&&!module.nodeType&&module,pt=lt&&lt.exports===ft&&e.process;const bt=function(){try{var t=lt&&lt.require&&lt.require("util").types;return t||pt&&pt.binding&&pt.binding("util")}catch(e){}}();var yt=bt&&bt.isTypedArray;const vt=yt?st(yt):function(t){return y(t)&&Q(t.length)&&!!it[b(t)]};var jt=Object.prototype.hasOwnProperty;function ht(t,e){var r=v(t),n=!r&&nt(t),o=!r&&!n&&ut(t),c=!r&&!n&&!o&&vt(t),a=r||n||o||c,u=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],i=u.length;for(var s in t)!e&&!jt.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||c&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||R(s,i))||u.push(s);return u}function dt(t,e){return function(r){return t(e(r))}}const _t=dt(Object.keys,Object);var gt=Object.prototype.hasOwnProperty;function Ot(t){return H(t)?ht(t):function(t){if(!X(t))return _t(t);var e=[];for(var r in Object(t))gt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}var mt=Object.prototype.hasOwnProperty;function wt(t){if(!j(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=X(t),r=[];for(var n in t)("constructor"!=n||!e&&mt.call(t,n))&&r.push(n);return r}function At(t){return H(t)?ht(t,!0):wt(t)}const xt=E(Object,"create");var St=Object.prototype.hasOwnProperty;var zt=Object.prototype.hasOwnProperty;function Pt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ft(t,e){for(var r=t.length;r--;)if(V(t[r][0],e))return r;return-1}Pt.prototype.clear=function(){this.__data__=xt?xt(null):{},this.size=0},Pt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Pt.prototype.get=function(t){var e=this.__data__;if(xt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return St.call(e,t)?e[t]:void 0},Pt.prototype.has=function(t){var e=this.__data__;return xt?void 0!==e[t]:zt.call(e,t)},Pt.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xt&&void 0===e?"__lodash_hash_undefined__":e,this};var Ut=Array.prototype.splice;function kt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}kt.prototype.clear=function(){this.__data__=[],this.size=0},kt.prototype.delete=function(t){var e=this.__data__,r=Ft(e,t);return!(r<0)&&(r==e.length-1?e.pop():Ut.call(e,r,1),--this.size,!0)},kt.prototype.get=function(t){var e=this.__data__,r=Ft(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return Ft(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=Ft(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const It=E(n,"Map");function Ct(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map}function Et(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mt(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}Et.prototype.clear=function(){this.size=0,this.__data__={hash:new Pt,map:new(It||kt),string:new Pt}},Et.prototype.delete=function(t){var e=Ct(this,t).delete(t);return this.size-=e?1:0,e},Et.prototype.get=function(t){return Ct(this,t).get(t)},Et.prototype.has=function(t){return Ct(this,t).has(t)},Et.prototype.set=function(t,e){var r=Ct(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Tt=dt(Object.getPrototypeOf,Object);var qt=Function.prototype,Bt=Object.prototype,Dt=qt.toString,$t=Bt.hasOwnProperty,Rt=Dt.call(Object);function Nt(t){var e=this.__data__=new kt(t);this.size=e.size}Nt.prototype.clear=function(){this.__data__=new kt,this.size=0},Nt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Nt.prototype.get=function(t){return this.__data__.get(t)},Nt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var n=r.__data__;if(!It||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Et(n)}return r.set(t,e),this.size=r.size,this};var Vt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wt=Vt&&"object"==typeof module&&module&&!module.nodeType&&module,Lt=Wt&&Wt.exports===Vt?n.Buffer:void 0,Gt=Lt?Lt.allocUnsafe:void 0;function Jt(){return[]}var Qt=Object.prototype.propertyIsEnumerable,Ht=Object.getOwnPropertySymbols;const Kt=Ht?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,c=[];++r<n;){var a=t[r];e(a,r,t)&&(c[o++]=a)}return c}(Ht(t),(function(e){return Qt.call(t,e)})))}:Jt;const Xt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Mt(e,Kt(t)),t=Tt(t);return e}:Jt;function Yt(t,e,r){var n=e(t);return v(t)?n:Mt(n,r(t))}function Zt(t){return Yt(t,Ot,Kt)}function te(t){return Yt(t,At,Xt)}const ee=E(n,"DataView");const re=E(n,"Promise");const ne=E(n,"Set");var oe="[object Map]",ce="[object Promise]",ae="[object Set]",ue="[object WeakMap]",ie="[object DataView]",se=S(ee),fe=S(It),le=S(re),pe=S(ne),be=S(M),ye=b;(ee&&ye(new ee(new ArrayBuffer(1)))!=ie||It&&ye(new It)!=oe||re&&ye(re.resolve())!=ce||ne&&ye(new ne)!=ae||M&&ye(new M)!=ue)&&(ye=function(t){var e=b(t),r="[object Object]"==e?t.constructor:void 0,n=r?S(r):"";if(n)switch(n){case se:return ie;case fe:return oe;case le:return ce;case pe:return ae;case be:return ue}return e});const ve=ye;var je=Object.prototype.hasOwnProperty;const he=n.Uint8Array;function de(t){var e=new t.constructor(t.byteLength);return new he(e).set(new he(t)),e}var _e=/\w*$/;var ge=o?o.prototype:void 0,Oe=ge?ge.valueOf:void 0;var me="[object Boolean]",we="[object Date]",Ae="[object Map]",xe="[object Number]",Se="[object RegExp]",ze="[object Set]",Pe="[object String]",Fe="[object Symbol]",Ue="[object ArrayBuffer]",ke="[object DataView]",Ie="[object Float32Array]",Ce="[object Float64Array]",Ee="[object Int8Array]",Me="[object Int16Array]",Te="[object Int32Array]",qe="[object Uint8Array]",Be="[object Uint8ClampedArray]",De="[object Uint16Array]",$e="[object Uint32Array]";function Re(t,e,r){var n,o,c,a=t.constructor;switch(e){case Ue:return de(t);case me:case we:return new a(+t);case ke:return function(t,e){var r=e?de(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case Ie:case Ce:case Ee:case Me:case Te:case qe:case Be:case De:case $e:return function(t,e){var r=e?de(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case Ae:return new a;case xe:case Pe:return new a(t);case Se:return(c=new(o=t).constructor(o.source,_e.exec(o))).lastIndex=o.lastIndex,c;case ze:return new a;case Fe:return n=t,Oe?Object(Oe.call(n)):{}}}var Ne=bt&&bt.isMap;const Ve=Ne?st(Ne):function(t){return y(t)&&"[object Map]"==ve(t)};var We=bt&&bt.isSet;const Le=We?st(We):function(t){return y(t)&&"[object Set]"==ve(t)};var Ge=1,Je=2,Qe=4,He="[object Arguments]",Ke="[object Function]",Xe="[object GeneratorFunction]",Ye="[object Object]",Ze={};function tr(t,e,r,n,o,c){var a,u=e&Ge,i=e&Je,s=e&Qe;if(r&&(a=o?r(t,n,o,c):r(t)),void 0!==a)return a;if(!j(t))return t;var f=v(t);if(f){if(a=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&je.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!u)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(t,a)}else{var l=ve(t),p=l==Ke||l==Xe;if(ut(t))return function(t,e){if(e)return t.slice();var r=t.length,n=Gt?Gt(r):new t.constructor(r);return t.copy(n),n}(t,u);if(l==Ye||l==He||p&&!o){if(a=i||p?{}:function(t){return"function"!=typeof t.constructor||X(t)?{}:q(Tt(t))}(t),!u)return i?function(t,e){return G(t,Xt(t),e)}(t,function(t,e){return t&&G(e,At(e),t)}(a,t)):function(t,e){return G(t,Kt(t),e)}(t,function(t,e){return t&&G(e,Ot(e),t)}(a,t))}else{if(!Ze[l])return o?t:{};a=Re(t,l,u)}}c||(c=new Nt);var b=c.get(t);if(b)return b;c.set(t,a),Le(t)?t.forEach((function(n){a.add(tr(n,e,r,n,t,c))})):Ve(t)&&t.forEach((function(n,o){a.set(o,tr(n,e,r,o,t,c))}));var y=f?void 0:(s?i?te:Zt:i?At:Ot)(t);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(y||t,(function(n,o){y&&(n=t[o=n]),L(a,o,tr(n,e,r,o,t,c))})),a}Ze[He]=Ze["[object Array]"]=Ze["[object ArrayBuffer]"]=Ze["[object DataView]"]=Ze["[object Boolean]"]=Ze["[object Date]"]=Ze["[object Float32Array]"]=Ze["[object Float64Array]"]=Ze["[object Int8Array]"]=Ze["[object Int16Array]"]=Ze["[object Int32Array]"]=Ze["[object Map]"]=Ze["[object Number]"]=Ze[Ye]=Ze["[object RegExp]"]=Ze["[object Set]"]=Ze["[object String]"]=Ze["[object Symbol]"]=Ze["[object Uint8Array]"]=Ze["[object Uint8ClampedArray]"]=Ze["[object Uint16Array]"]=Ze["[object Uint32Array]"]=!0,Ze["[object Error]"]=Ze[Ke]=Ze["[object WeakMap]"]=!1;return e=>(r,n,o={})=>{const{useRouter:c,useRoute:a}=e,u=a(),i=c(),s=t.ref(tr(r,5));const f=t.ref(null==u?void 0:u.name),l=Object.keys(r),p=(t="push")=>{const e=l.reduce(((t,e)=>{const r=s.value[e];return t[e]="string"!=typeof r?JSON.stringify(r):r,t}),{});u.name===f.value&&i[t]({path:u.path,query:e})},j=(t,e)=>{try{return JSON.parse(t)}catch(r){if("object"===e)return{};if("array"===e)return[]}},h=(t,e)=>{if("number"==typeof r[e])return+t;if("string"==typeof r[e])return t;if("boolean"==typeof r[e]){return"true"===t}return function(t){if(!y(t)||"[object Object]"!=b(t))return!1;var e=Tt(t);if(null===e)return!0;var r=$t.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Dt.call(r)==Rt}(r[e])?j(t,"object"):v(r[e])?j(t,"array"):function(t){return null===t}(r[e])?null:t},d=()=>{l.forEach((t=>{const e=u.query[t];if(void 0===e)s.value[t]=r[t];else if(t in n){const o=n[t](h(e,t));s.value[t]=o?h(e,t):r[t]}else s.value[t]=h(e,t)})),p("replace")},_=t.computed((()=>u.query)),g=t.computed((()=>u.params));t.watch((()=>[_.value,g.value]),(()=>{d(),o.queryChangeCallback&&o.queryChangeCallback(s.value)}));return t.onMounted((()=>{o.mountedCallback&&o.mountedCallback(s.value)})),d(),o.initCallback&&o.initCallback(s.value),{queryData:s,updateQueryData:t=>{s.value={...s.value,...t},p()}}}}));
